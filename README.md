# 微信小程序打卡系统

基于微信小程序的极简打卡系统，采用预分配账户和位图算法存储打卡数据，支持学生打卡、教师管理和班委统计功能。

## 🚀 项目简介

本项目是一个基于微信小程序的课堂打卡系统，主要解决传统考勤方式效率低下的问题，使用位图算法高效存储打卡数据。

### 核心特点

- 🔒 **预分配账户系统**：无需注册，直接使用预分配账户登录
-  **位图算法存储**：高效存储150天打卡记录，仅需5个整数
- 👥 **多角色支持**：学生、教师、班委三种角色
- 📱 **微信小程序原生开发**：无需下载额外应用

## 🛠️ 技术架构

| 模块 | 技术栈 | 功能 |
|------|--------|------|
| 前端 | 微信小程序原生开发 | 用户界面、打卡操作 |
| 后端 | Flask + SQLite | 用户认证、数据存储、业务逻辑 |
| 数据存储 | 位图算法 | 高效存储打卡记录 |

## 📁 项目结构

```
.
├── backend/                # 后端服务
│   ├── app.py             # Flask应用入口
│   ├── database.py        # 数据库初始化和操作
│   ├── student.py         # 学生相关API
│   └── teacher.py         # 教师相关API
├── miniprogram/           # 微信小程序前端
│   ├── pages/             # 页面文件
│   │   ├── login/         # 登录页面
│   │   ├── student/       # 学生页面（包含打卡功能）
│   │   └── teacher/       # 教师管理页面
│   ├── utils/             # 工具函数
│   │   └── auth.js        # 认证工具
│   └── app.js             # 小程序入口
└── docs/                  # 项目文档
```

### 主要文件说明

#### 后端文件

| 文件 | 功能 |
|------|------|
| `backend/app.py` | Flask应用入口，处理HTTP请求和路由 |
| `backend/database.py` | 数据库初始化、连接和查询操作 |
| `backend/student.py` | 学生相关API，如打卡、查询打卡记录 |
| `backend/teacher.py` | 教师相关API，如查看学生打卡情况、统计数据 |

#### 前端文件

| 文件 | 功能 |
|------|------|
| `miniprogram/pages/login/login.js` | 登录页面逻辑，处理用户登录请求 |
| `miniprogram/pages/student/student.js` | 学生打卡页面逻辑，包含打卡功能 |
| `miniprogram/pages/teacher/teacher.js` | 教师管理页面逻辑，显示学生打卡统计 |
| `miniprogram/utils/auth.js` | 认证工具，处理登录状态管理 |

## ✨ 主要功能

### 1. 登录功能

- 支持学生、教师、班委三种角色登录
- 预分配账户系统，无需注册
- 基于学号/工号和密码验证

### 2. 学生打卡功能

- 一键快速打卡
- 自动记录打卡时间
- 使用位图算法存储打卡记录

### 3. 教师管理功能

- 查看总学生数
- 查看今日打卡人数
- 查看学生列表及打卡状态
- 支持班委任命

### 4. 班委功能

- 拥有学生角色的所有功能
- 可查看本班学生打卡情况

## 📋 快速开始

### 开发环境

- 微信开发者工具
- Python 3.7+
- Flask 2.0+

### 后端部署

1. 进入后端目录
```bash
cd backend
```

2. 安装依赖
```bash
pip install flask flask-cors
```

3. 启动后端服务
```bash
python app.py
```

4. 后端服务将运行在 `http://localhost:5000`

### 前端部署

1. 使用微信开发者工具导入 `miniprogram` 目录
2. 在微信开发者工具中配置项目
3. 修改 `utils/auth.js` 中的API地址为后端服务地址
4. 编译并运行小程序

## 🧪 测试

### 单元测试重点

- 位图算法测试：验证第n天打卡是否正确设置对应位
- 登录验证测试：测试账号密码验证逻辑

### 集成测试流程

1. 学生登录 → 一键打卡 → 验证位图更新
2. 老师登录 → 查看统计 → 验证数据显示
3. 班委登录 → 查看本班情况 → 验证权限控制

## 📊 位图算法说明

### 算法原理

使用位图算法存储150天的打卡记录，将每一天映射为一个二进制位：

- 第1天 → 第0位
- 第2天 → 第1位
- ...
- 第150天 → 第149位

### 存储格式

使用5个32位整数存储150天的打卡记录，每个整数存储32天的数据。例如：

```
0,0,0,0,0  # 初始状态，全部未打卡
1,0,0,0,0  # 第1天已打卡
3,0,0,0,0  # 第1天和第2天已打卡
```

### 算法优势

- 存储空间小：150天记录仅需5个整数
- 计算效率高：位运算操作快速
- 便于统计：可快速计算打卡天数

## 🤝 贡献

欢迎提交Issue和Pull Request！

### 贡献流程

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

如有问题或建议，欢迎通过以下方式联系：

- 项目地址：[GitHub Repository](https://github.com/yourusername/checkin-system)
- 作者：[Your Name]

## 📝 更新日志

### v1.0.0 (2024-09-01)

- ✅ 实现基础登录功能
- ✅ 实现学生打卡功能
- ✅ 实现教师管理功能
- ✅ 实现位图算法存储
- ✅ 支持多角色系统

### v1.1.0 (2024-09-15)

- ✅ 添加班委角色
- ✅ 优化打卡逻辑
- ✅ 增加打卡记录查询
- ✅ 优化教师统计页面

## 🎯 后续计划

- [ ] 添加打卡提醒功能
- [ ] 支持自定义打卡范围
- [ ] 添加打卡记录导出功能
- [ ] 支持批量导入学生数据
- [ ] 增加数据可视化统计

## 🌟 致谢

感谢所有为本项目做出贡献的开发者！

---

**欢迎使用微信小程序打卡系统！** 🎉